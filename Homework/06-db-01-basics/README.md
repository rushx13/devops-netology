БД

# Домашнее задание к занятию "6.1. Типы и структура СУБД"

## Введение

Перед выполнением задания вы можете ознакомиться с 
[дополнительными материалами](https://github.com/netology-code/virt-homeworks/tree/master/additional/README.md).

## Задача 1

Архитектор ПО решил проконсультироваться у вас, какой тип БД 
лучше выбрать для хранения определенных данных.

Он вам предоставил следующие типы сущностей, которые нужно будет хранить в БД:

Выберите подходящие типы СУБД для каждой сущности и объясните свой выбор.

- Электронные чеки в json виде
```
Для данной задачи хорошо подходит NoSQL - MongoDB.
```
- Склады и автомобильные дороги для логистической компании
```
Задача двойная, информацию о складе лучше хранить в реляционной базе, а автомобильные дороги 
для быстрого построения маршрутов лучше использовать БД графового типа. 
```
- Генеалогические деревья
```
NoSQL, в частности иерархический тип. При необходимости указания дополнительной информации 
можно использовать графовые.
```
- Кэш идентификаторов клиентов с ограниченным временем жизни для движка аутенфикации
```
Для кэша очень важна скорость работы, лучше всего на мой взгляд подойдет хранящиеся в 
оперативной памяти типы БД - Redis или Memcached.
```
- Отношения клиент-покупка для интернет-магазина
```
Подойдет NoSQL типа ключ-значение, ключём может быть уникальный идентификатор 
покупателя - логин/почта/номер телефона.
```

## Задача 2

Вы создали распределенное высоконагруженное приложение и хотите классифицировать его согласно 
CAP-теореме. Какой классификации по CAP-теореме соответствует ваша система, если 
(каждый пункт - это отдельная реализация вашей системы и для каждого пункта надо привести классификацию):

- Данные записываются на все узлы с задержкой до часа (асинхронная запись)
- При сетевых сбоях, система может разделиться на 2 раздельных кластера
- Система может не прислать корректный ответ или сбросить соединение

А согласно PACELC-теореме, как бы вы классифицировали данные реализации?

Ответ:

- Данные записываются на все узлы с задержкой до часа (асинхронная запись)
```
CAP: AP (В системе класса AP не гарантируется целостность, но при этом выполнены условия 
доступности и устойчивости к распаду на секции)
PACELC: PA/EL
```
- При сетевых сбоях, система может разделиться на 2 раздельных кластера
```
CAP: CA (В системе класса CA во всех узлах данные согласованы и обеспечена доступность, 
при этом она жертвует устойчивостью к распаду на секции)
PACELC: PA/EC
```
- Система может не прислать корректный ответ или сбросить соединение
```
CAP: CP (Система класса CP в каждый момент обеспечивает целостный результат и способна 
функционировать в условиях распада, но достигает этого в ущерб доступности: 
может не выдавать отклик на запрос)
PACELC: PC/EC
```

## Задача 3

Могут ли в одной системе сочетаться принципы BASE и ACID? Почему?

```
Нет не могут, так как BASE (базовая доступность, неустойчивое состояние, 
согласованность в конечном счёте) противопоставляет себя ACID.
```

## Задача 4

Вам дали задачу написать системное решение, основой которого бы послужили:

- фиксация некоторых значений с временем жизни
- реакция на истечение таймаута

Вы слышали о key-value хранилище, которое имеет механизм [Pub/Sub](https://habr.com/ru/post/278237/). 
Что это за система? Какие минусы выбора данной системы?

```
Для данной задачи мы можем выбрать Redis.

Redis (REmote DIctionary Server) — это нереляционная высокопроизводительная СУБД. 
Redis хранит все данные в памяти, доступ к данным осуществляется по ключу. 
Опционально копия данных может храниться на диске. Этот подход обеспечивает производительность, 
в десятки раз превосходящую производительность реляционных СУБД, 
а также упрощает секционирование (шардинг) данных.

поддерживает то, что от нас требуется:

• Данным можно присваивать Time-To-Live
• Имеется встроенная система Pub/Sub
• Поддерживает Master-Slave репликацию

Недостатки:

Основной недостаток - объем данных, который может хранится на одном физическом сервере, 
ограничен объемом оперативной памяти на этом сервере. 
Таким образом, хранить в Redis много данных стоит недешево.

```

---

### Как оформить ДЗ?

Выполненное домашнее задание пришлите ссылкой на .md-файл в вашем репозитории.

---
